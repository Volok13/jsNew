<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>


<script>
//---------------------------async await функції

    // async function foo() {
    //     let users = await fetch('https://jsonplaceholder.typicode.com/users')
    //         .then(value => value.json());
    //     let posts = await fetch('https://jsonplaceholder.typicode.com/posts')
    //     .then(value => value.json)
    //
    //     console.log(users)
    //     console.log(posts);
    // }
    //
    // foo();

//---------------------------Асинхронність та  цикл подій event loop

// console.log('start');
// console.log('start1');
// console.log('start2');
// console.log('start3');
// console.log('start4');
// console.log('start5');
//
// console.log('end');

// console.log('start');
// setTimeout(function() {
//     console.log('kfjehkf');
// }, 1000);
// console.log('end');


// let x = 1;
// setTimeout(function () {
//     x = 1000;
// }, 1000);
// console.log(x);
//
// let x = 1;
// for (let i = 0; i < 10000; i++){
//
// }
// setTimeout(function () {
//     x = 1000;
// }, 1000);
// console.log(x);


//---------------------------event loop ще одне пояснення

// setTimeout(() => {
//     console.log('asd');
// }, 2000);
// setTimeout(() => {
//     console.log('qweqw');
// }, 1000);

// setTimeout(() => {
//     console.log('asd');
// }, 0);
// setTimeout(() => {
//     console.log('qweqw');
// }, 0);


// console.log('log1');
//
//
// setTimeout(() => {
//     console.log('asd');
// }, 2000);
// console.log('log2');
//
//
// setTimeout(() => {
//     console.log('qweqw');
// }, 1000);
// console.log('log3');


// let x = 0;
// setTimeout(() => {
//     x = 100500;
// }, 1000);
// console.log(x);


// let i = 0;
// while (i < 5) {
//
//     setTimeout(() => {
//         console.log(i);
//     }, 1000);
//     i++;
// }

// let i = 0;
// while (i < 5) {
//     run(i);
//     i++;
// }
// function run(i) {
//     setTimeout(() => {
//         console.log(i);
//     }, 1000);
// }

//---------------------------Проміси reslove

// setTimeout(() => {
//     let x = 1;
//     console.log(x);
//     setTimeout(() => {
//         x++;
//         console.log(x);
//         setTimeout(() => {
//             x++;
//             console.log(x)
//         }, 1000);
//     }, 1000);
// }, 1000);

// new Promise((resolve) => {
//     setTimeout(() => {
//         let x = 1;
//         console.log(x)
//         resolve(x);
//     }, 1000);
// }).then((x) => {
//     return new Promise(resolve => {
//         setTimeout(() => {
//             x++;
//             console.log(x);
//             resolve(x);
//         }, 1000)
//     })//повертає андефайн
// }).then(x => {
//     return new Promise(resolve => {
//         setTimeout(() => {
//             x++;
//             console.log(x);
//             resolve(x);
//         }, 1000);
//     });
// }).then(x => {
//         return new Promise(resolve => {
//             setTimeout(() => {
//                 x++;
//                 console.log(x);
//                 resolve(x);
//             }, 1000);
//         });
// });


//---------------------------Проміси reject

// new Promise((resolve, reject) => {
//     setTimeout(() => {
//         let x = 1;
//         console.log(x)
//         resolve(x);
//     }, 1000);
// }).then(value => {
//     return new Promise((resolve, reject) => {
//         setTimeout(() => {
//             value++;
//             console.log(value);
//             // resolve(value);
//             // throw new Error('kfkgnkg');
//             if(true) {
//                 reject('hahahahaha');
//             }else{
//                 resolve(value);
//             }
//
//         }, 1000);
//     });
// }).catch(reason => {
//     console.log(reason);
// }).then(value => {
//     setTimeout(() => {
//         value++;
//         console.log(value);
//     }, 1000);
// }).then(value => {
//
// })

// .then(value => {
//     setTimeout(() => {
//         value++;
//         console.log(value);
//     }, 1000);
// }).then(value => {
//
// })


//---------------------------Статуси промісів
//---------------------------Promise race all any

// let users = fetch('https://jsonplaceholder.typicode.com/users')
//     .then(value => value.json())
//     .then(users => {
//         for (const user of users) {
//             fetch('https://jsonplaceholder.typicode.com/usersId=' + user.id)
//                 .then(value => value.json())
//                 .then(postsOfIteratedUser => {
//                     user.posts = postsOfIteratedUser;
//                 });
//             console.log(user);
//         }
//     });




// let users = fetch('https://jsonplaceholder.typicode.com/users')
//     .then(value => value.json())
//
// let posts = fetch('https://jsonplaceholder.typicode.com/posts')
//     .then(value => value.json());


// Promise.all([users, posts]).then(result => {
//
//     let [users, posts] = result;
//     for(const user of users) {
//         user.posts = [];
//         for(const post of posts) {
//             if(user.id === posts.userId){
//                 user.posts.push(post);
//             }
//         }
//     }
//
//     console.log(users);
//     // let usersArray = result[0];
//     // let postsArray = result[1];
//     // console.log(usersArray);
//     // console.log(postsArray);
//
// });


// Promise.race([users, posts]).then(value => console.log(value));
// Promise.any([users, posts]).then(value => console.log(value));



</script>



</body>
</html>